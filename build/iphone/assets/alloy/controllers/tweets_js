function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(){r()}function t(e,t){var i,r,o,a="",n="";if(a=e,a=a.replace(/\s{2,}|^\s|\s$/g," "),a=a.replace(/[\t\r\n]/g,""),"now"==a)return(new Date).getTime()/1e3;if(!isNaN(n=Date.parse(a)))return n/1e3;t=t?new Date(1e3*t):new Date,a=a.toLowerCase();var s={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:{jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}},l=function(e){var i=e[2]&&"ago"==e[2],r=(r="last"==e[0]?-1:1)*(i?-1:1);switch(e[0]){case"last":case"next":switch(e[1].substring(0,3)){case"yea":t.setFullYear(t.getFullYear()+r);break;case"mon":t.setMonth(t.getMonth()+r);break;case"wee":t.setDate(t.getDate()+7*r);break;case"day":t.setDate(t.getDate()+r);break;case"hou":t.setHours(t.getHours()+r);break;case"min":t.setMinutes(t.getMinutes()+r);break;case"sec":t.setSeconds(t.getSeconds()+r);break;default:var o;if("undefined"!=typeof(o=s.day[e[1].substring(0,3)])){var a=o-t.getDay();0==a?a=7*r:a>0?"last"==e[0]&&(a-=7):"next"==e[0]&&(a+=7),t.setDate(t.getDate()+a)}}break;default:if(!/\d+/.test(e[0]))return!1;switch(r*=parseInt(e[0],10),e[1].substring(0,3)){case"yea":t.setFullYear(t.getFullYear()+r);break;case"mon":t.setMonth(t.getMonth()+r);break;case"wee":t.setDate(t.getDate()+7*r);break;case"day":t.setDate(t.getDate()+r);break;case"hou":t.setHours(t.getHours()+r);break;case"min":t.setMinutes(t.getMinutes()+r);break;case"sec":t.setSeconds(t.getSeconds()+r)}}return!0};if(r=a.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/),null!=r){r[2]?r[3]||(r[2]+=":00"):r[2]="00:00:00",o=r[1].split(/-/g);for(i in s.mon)s.mon[i]==o[1]-1&&(o[1]=i);return o[0]=parseInt(o[0],10),o[0]=o[0]>=0&&o[0]<=69?"20"+(o[0]<10?"0"+o[0]:o[0]+""):o[0]>=70&&o[0]<=99?"19"+o[0]:o[0]+"",parseInt(this.strtotime(o[2]+" "+o[1]+" "+o[0]+" "+r[2])+(r[4]?r[4]/1e3:""),10)}var d="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(r=a.match(new RegExp(d,"gi")),null==r)return!1;for(i=0;i<r.length;i++)if(!l(r[i].split(" ")))return!1;return t.getTime()/1e3}function i(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(1e3*e),r=((new Date).getTime()-i.getTime())/1e3,o=Math.floor(r/86400);if(isNaN(o)||0>o)return"";if(o>=31){var a=i.getFullYear(),n=t[i.getMonth()],s=i.getMonth()+1;10>s&&(s="0"+s);var l=i.getDate();return 10>l&&(l="0"+l),l+" "+n+" "+a}return 0==o&&(60>r&&"just now"||120>r&&"1 minute ago"||3600>r&&Math.floor(r/60)+" minutes ago"||7200>r&&"1 hour ago"||86400>r&&"about "+Math.floor(r/3600)+" hours ago")||1==o&&"Yesterday"||7>o&&o+" days ago"||31>o&&Math.ceil(o/7)+" week"+(1==Math.ceil(o/7)?"":"s")+" ago"}function r(){var e=[],r=Ti.Network.createHTTPClient();r.timeout=1e6;var o="AAAAAAAAAAAAAAAAAAAAAEHKSgAAAAAAKzh8n7rBx8SsTJECCkRlVHW%2FlG8%3DvVgRTmoK6wDp1DEw9GZMShZcdCgDcd4CgwvBbzrgbk";r.open("GET","https://api.twitter.com/1.1/search/tweets.json?q="+l+"&result_type=recent"),r.setRequestHeader("Authorization","Bearer "+o),r.onload=function(){try{var r=JSON.parse(this.responseText);_.each(r.statuses,function(r){Ti.API.info("DATA: "+r.user.entities.url.urls[0].expanded_url);var o=Alloy.createController("tweetRow",{tweet:r.text,user:r.user.name,avatar:r.user.profile_image_url,created_at:i(t(r.created_at)),first_url:r.user.entities.url.urls[0].expanded_url}).getView();e.push(o)}),a.tweetsTable.setData(e)}catch(o){Ti.API.info(o)}},r.send()}function o(){setTimeout(function(){r(),a.refresh.endRefreshing()},2e3)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="tweets",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var a=this,n={},s={};a.__views.tweetsWindow=Ti.UI.createWindow({barColor:"#B00909",top:Alloy.Globals.winTopHeight,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,orientationModes:[Ti.UI.PORTRAIT],id:"tweetsWindow",title:"Tweets"}),e?a.__views.tweetsWindow.addEventListener("open",e):s["$.__views.tweetsWindow!open!doOpen"]=!0,a.__views.__alloyId31=Ti.UI.createLabel({font:{fontFamily:"ExpoSansPro-Regular",fontSize:"16dp"},height:"100%",width:Ti.UI.SIZE,color:"#FFF",text:"Bere Island Easter Retreat 2015",id:"__alloyId31"}),a.__views.tweetsWindow.titleControl=a.__views.__alloyId31,a.__views.__alloyId33=Ti.UI.createImageView({image:"/images/doves_title.png",height:30,id:"__alloyId33"}),a.__views.tweetsWindow.leftNavButton=a.__views.__alloyId33,a.__views.refresh=Ti.UI.createRefreshControl({tintColor:"#6DD900",id:"refresh"}),o?a.__views.refresh.addEventListener("refreshstart",o):s["$.__views.refresh!refreshstart!reloadData"]=!0,a.__views.tweetsTable=Ti.UI.createTableView({minRowHeight:58,refreshControl:a.__views.refresh,id:"tweetsTable"}),a.__views.tweetsWindow.add(a.__views.tweetsTable),a.__views.tweetsTab=Ti.UI.createTab({icon:"/images/twitter.png",window:a.__views.tweetsWindow,id:"tweetsTab",title:" Twitter "}),a.__views.tweetsTab&&a.addTopLevelView(a.__views.tweetsTab),n.destroy=function(){},_.extend(a,a.__views),arguments[0]||{};var l="%23bereislandretreat2015";s["$.__views.tweetsWindow!open!doOpen"]&&a.__views.tweetsWindow.addEventListener("open",e),s["$.__views.refresh!refreshstart!reloadData"]&&a.__views.refresh.addEventListener("refreshstart",o),_.extend(a,n)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;